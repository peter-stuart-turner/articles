<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Time Series Analysis and Climate Change</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Time Series Analysis and Climate Change</h1>
</header>
<section data-field="subtitle" class="p-summary">
A hands-on guide to time series analysis; investigating climate data using Python and Facebook’s Prophet library
</section>
<section data-field="description" class="p-summary">
An interactive, ‘get-your-hands-dirty’ guide to Python-based time series analyses through the investigation of NASA and Worldbank climate data
</section>
<section data-field="body" class="e-content">
<section name="c998" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="f3f2" id="f3f2" class="graf graf--figure graf--leading"><img class="graf-image" data-image-id="1*tHGjyS4ASMt_lkNcpQegLg.png" data-width="1000" data-height="750" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*tHGjyS4ASMt_lkNcpQegLg.png"></figure><h3 name="8d19" id="8d19" class="graf graf--h3 graf-after--figure graf--title">Time Series Analysis &amp; Climate Change</h3><h4 name="7b0f" id="7b0f" class="graf graf--h4 graf-after--h3 graf--subtitle">An introductory, hands-on guide to time series analysis and forecasting; investigating climate data using Python, Pandas, and Facebook’s Prophet library</h4><h3 name="6eb7" id="6eb7" class="graf graf--h3 graf-after--h4">Contents — What to Expect in this Post</h3><figure name="dc19" id="dc19" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*kKay2_0jIPpSePFUqttBEA.png" data-width="1228" data-height="930" src="https://cdn-images-1.medium.com/max/800/1*kKay2_0jIPpSePFUqttBEA.png"><figcaption class="imageCaption">Contents of this Blog Post</figcaption></figure><h3 name="7f39" id="7f39" class="graf graf--h3 graf-after--figure">Why time series?</h3><p name="8f40" id="8f40" class="graf graf--p graf-after--h3">All of life’s scenes are placed in the foreground of time, take her away and there isn’t a picture left that we can comprehend. Understanding time itself is not a pursuit for the faint-hearted (see <a href="https://www.youtube.com/watch?v=YycAzdtUIko" data-href="https://www.youtube.com/watch?v=YycAzdtUIko" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a> and <a href="http://www.exactlywhatistime.com/definition-of-time/" data-href="http://www.exactlywhatistime.com/definition-of-time/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a>), and we as humans are pretty much stuck comprehending time as a linear concept.</p><p name="d38c" id="d38c" class="graf graf--p graf-after--p">Time series analysis is useful for two major reasons:</p><ol class="postList"><li name="ea22" id="ea22" class="graf graf--li graf-after--p">It allows us to understand and compare things without losing the important, shared background of ‘time’</li><li name="37b7" id="37b7" class="graf graf--li graf-after--li">It allows us to make forecasts</li></ol><h3 name="880c" id="880c" class="graf graf--h3 graf--startsWithSingleQuote graf-after--li">‘Make-up’ of a time series</h3><p name="c8b3" id="c8b3" class="graf graf--p graf-after--h3">A time series is a set of repeated measurements of the same phenomenon, taken sequentially over time; it is thus an interesting variation of data type — it encapsulates this background of time, as well as…erm… anything else.</p><p name="2051" id="2051" class="graf graf--p graf-after--p">Time is (usually) the independent variable in a time series, whilst the dependent variable is the ‘other thing’. It is useful to think of a time series as being made up of different components — this is known as <a href="https://en.wikipedia.org/wiki/Decomposition_of_time_series" data-href="https://en.wikipedia.org/wiki/Decomposition_of_time_series" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><em class="markup--em markup--p-em">decomposition modeling</em></a><em class="markup--em markup--p-em">,</em> and the resulting models can be additive or multiplicative in nature.</p><p name="29b2" id="29b2" class="graf graf--p graf-after--p">The four main components are:</p><ol class="postList"><li name="98b0" id="98b0" class="graf graf--li graf-after--p">Trend</li><li name="1b95" id="1b95" class="graf graf--li graf-after--li">Seasonality</li><li name="2433" id="2433" class="graf graf--li graf-after--li">Cyclicity</li><li name="f748" id="f748" class="graf graf--li graf-after--li">Irregularity</li></ol><figure name="5495" id="5495" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*e1VoA_iXZYqJyYgoMNQtrw.png" data-width="1000" data-height="750" src="https://cdn-images-1.medium.com/max/800/1*e1VoA_iXZYqJyYgoMNQtrw.png"><figcaption class="imageCaption">The four main components of a time series</figcaption></figure><h4 name="d994" id="d994" class="graf graf--h4 graf-after--figure">Trend</h4><p name="b362" id="b362" class="graf graf--p graf-after--h4">Persistent over a relatively long period of time, the trend is the overall increase or decrease of the series during that time. See in the picture above how the series exhibits an upwards trend (shown with the two, straight green lines).</p><h4 name="213b" id="213b" class="graf graf--h4 graf-after--p">Seasonality</h4><p name="db8b" id="db8b" class="graf graf--p graf-after--h4">Seasonality is the presence of variations that occur at specific regular intervals; it is the component of the data and series that experiences regular and predictable changes over a fixed period. Seasonality is illustrated in the picture above — notice the six identical ‘up-down’ fluctuations seen at regular intervals of <em class="markup--em markup--p-em">x </em>minutes. The peaks and troughs could also be illustrative of a seasonal component.</p><h4 name="7924" id="7924" class="graf graf--h4 graf-after--p"><strong class="markup--strong markup--h4-strong">Cyclicity</strong></h4><p name="9d2c" id="9d2c" class="graf graf--p graf-after--h4">Cyclicity refers to the variation caused by circumstances, which repeat at irregular intervals. Seasonal behavior is very strictly regular, meaning there is a precise amount of time between the peaks and troughs of the data; cyclical behavior, on the other hand, can drift over time because the time between periods isn’t precise. For example, the stock market tends to cycle between periods of high and low values, but there is no set amount of time between those fluctuations. Cyclicity is illustrated in the picture above; in this case, the cyclicity seems to be due to specific events taking place before each occurrence.</p><h4 name="a8a5" id="a8a5" class="graf graf--h4 graf-after--p">Irregularity</h4><p name="294d" id="294d" class="graf graf--p graf-after--h4">Irregularity is the unpredictable component of a time series — the ‘randomness’. This component cannot be explained by any other component and includes variations which occur due to unpredictable factors that do not repeat in set patterns. In the picture above; the magnifying glass illustrates this rough, random, and irregular component.</p><h3 name="0c33" id="0c33" class="graf graf--h3 graf-after--p">Datasets</h3><h4 name="76b4" id="76b4" class="graf graf--h4 graf-after--h3">Pulling the data</h4><p name="f1b2" id="f1b2" class="graf graf--p graf-after--h4">This tutorial assumes that you are familiar with Jupyter notebooks and have at least some experience with Pandas. In this section, we will start getting our feet wet by getting hold of some climate data, and pulling it into our Jupyter Notebook with Pandas.</p><p name="876c" id="876c" class="graf graf--p graf-after--p">We will be using two datasets:</p><ol class="postList"><li name="1be8" id="1be8" class="graf graf--li graf-after--p">An estimate of global surface temperature change, from <a href="https://data.giss.nasa.gov/gistemp/" data-href="https://data.giss.nasa.gov/gistemp/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">NASA</a> (download <a href="https://data.giss.nasa.gov/gistemp/tabledata_v3/GLB.Ts+dSST.csv" data-href="https://data.giss.nasa.gov/gistemp/tabledata_v3/GLB.Ts+dSST.csv" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">here</a>)</li><li name="c1d7" id="c1d7" class="graf graf--li graf-after--li">An estimate of CO₂ emissions, in metric tons per capita, from the <a href="http://www.worldbank.org/" data-href="http://www.worldbank.org/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">World Bank</a> (download <a href="http://api.worldbank.org/v2/en/indicator/EN.ATM.CO2E.PC?downloadformat=csv" data-href="http://api.worldbank.org/v2/en/indicator/EN.ATM.CO2E.PC?downloadformat=csv" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">here</a>)</li></ol><p name="2163" id="2163" class="graf graf--p graf-after--li">*note: medium appends to the URLs above resulting in an ‘Access Denied’ error for the NASA data, to fix, paste the URL explicitly into the browser (<a href="https://data.giss.nasa.gov/gistemp/tabledata_v3/GLB.Ts+dSST.csv" data-href="https://data.giss.nasa.gov/gistemp/tabledata_v3/GLB.Ts+dSST.csv" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">https://data.giss.nasa.gov/gistemp/tabledata_v3/GLB.Ts+dSST.csv</a>).</p><p name="a430" id="a430" class="graf graf--p graf-after--p">*note: to get a more realistic experiment, what could actually be done is normalize the emissions per capita, with global population increase — would be keen to hear any comments here.</p><p name="16d1" id="16d1" class="graf graf--p graf-after--p">Firstly download the datasets in <a href="https://www.howtogeek.com/348960/what-is-a-csv-file-and-how-do-i-open-it/" data-href="https://www.howtogeek.com/348960/what-is-a-csv-file-and-how-do-i-open-it/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">CSV format</a> (using the links above) and read them in using pandas:</p><figure name="db59" id="db59" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/peter-stuart-turner/a946fda72182d0d39dcf3e286f7e9fa0.js.js"></script><figcaption class="imageCaption">Using Pandas to read in climate data in CSV format</figcaption></figure><p name="9cc0" id="9cc0" class="graf graf--p graf-after--figure">Notice that in these cases, when reading in the datasets, we have to skip several rows in order to get what we want — this is due to how the datasets are structured.</p><p name="bc10" id="bc10" class="graf graf--p graf-after--p">Note that link for the CO₂ emissions dataset given above downloads a compressed folder that contains 3 files, we are using the file ‘API_EN.ATM.CO2E.PC_DS2_en_csv_v2_10515380.csv’ in this tutorial. I have moved both raw CSVs into their own folder named ‘data’.</p><p name="ed04" id="ed04" class="graf graf--p graf-after--p">Let&#39;s have a look at our newly acquired datasets:</p><figure name="8f57" id="8f57" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*_AfQEC75mUxtmb504XlFHA.png" data-width="1448" data-height="478" src="https://cdn-images-1.medium.com/max/800/1*_AfQEC75mUxtmb504XlFHA.png"><figcaption class="imageCaption">GISTEMP temperature anomaly data from NASA</figcaption></figure><figure name="5569" id="5569" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*y3HAlT9eAElqGHgCV2EHPA.png" data-width="2028" data-height="1092" src="https://cdn-images-1.medium.com/max/800/1*y3HAlT9eAElqGHgCV2EHPA.png"><figcaption class="imageCaption">CO₂ emissions data, in metric tons per capita, from the World Bank</figcaption></figure><h4 name="5cd1" id="5cd1" class="graf graf--h4 graf-after--figure">Background</h4><p name="38c7" id="38c7" class="graf graf--p graf-after--h4">The temperature data represents temperature anomalies (differences from the mean/expected value) per month and per season (DJF=Dec-Feb, MAM=Mar-May, etc). We will not be working with absolute temperature data as in climate change studies, anomalies are more important than absolute temperature. A positive anomaly indicates that the observed temperature was warmer than the baseline, while a negative anomaly indicates that it was cooler than the baseline.</p><p name="34d4" id="34d4" class="graf graf--p graf-after--p">The CO₂ gives us the average CO₂ emissions (in metric tons) per person. The dataset is divided up by countries and other categories such as ‘World’ or ‘Upper middle income’, in this tutorial we are only interested in ‘World’ as we are looking at things on a global scale.</p><p name="ad58" id="ad58" class="graf graf--p graf-after--p">For more information on both datasets, see their respective download pages <a href="https://data.giss.nasa.gov/gistemp/" data-href="https://data.giss.nasa.gov/gistemp/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a> and <a href="https://data.worldbank.org/indicator/EN.ATM.CO2E.PC" data-href="https://data.worldbank.org/indicator/EN.ATM.CO2E.PC" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a>. Now that we have the data, let’s <a href="https://en.wikipedia.org/wiki/Data_wrangling" data-href="https://en.wikipedia.org/wiki/Data_wrangling" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">wrangle</a> it a bit so as to make it easier to work with.</p><h3 name="ed6c" id="ed6c" class="graf graf--h3 graf-after--p">Wrangling</h3><blockquote name="d3b3" id="d3b3" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--h3">“Data wrangling is the process of transforming and mapping data from one “raw” data form into another format, so as to make it more valuable for downstream processes such as analytics”</blockquote><h4 name="884e" id="884e" class="graf graf--h4 graf-after--blockquote">Wrangling temperature data</h4><p name="4f0a" id="4f0a" class="graf graf--p graf-after--h4">We will first wrangle NASA’s temperature anomaly data. In doing so, we will look at several things:</p><ul class="postList"><li name="9cf2" id="9cf2" class="graf graf--li graf-after--p">Using a DateTime index</li><li name="5cac" id="5cac" class="graf graf--li graf-after--li">Basic manipulation and dealing with missing values</li><li name="8d14" id="8d14" class="graf graf--li graf-after--li">Resampling to a different frequency</li></ul><p name="683f" id="683f" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Using a DateTime index:</em></strong></p><p name="60be" id="60be" class="graf graf--p graf-after--p">Using a <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DatetimeIndex.html" data-href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DatetimeIndex.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">DateTime index</a> can allow us to be more productive in our time series manipulation; it will allow us to make selections and take slices using timestamps or time ranges.</p><p name="b2dc" id="b2dc" class="graf graf--p graf-after--p">For the temperature data, we will create an empty DataFrame with a DateTime index of monthly frequency — we will then use our raw data in order to populate this new DataFrame. The empty DataFrame will range from 1880 to March 2019.</p><figure name="ca17" id="ca17" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/peter-stuart-turner/fa31e5b2bf6fb490f0ea94c05c654f95.js.js"></script><figcaption class="imageCaption">Creating a new Pandas DataFrame to hold the temperature anomaly data using a DateTime index</figcaption></figure><figure name="c183" id="c183" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*RipeuoPFso0ycMsfuX5TlQ.png" data-width="438" data-height="426" src="https://cdn-images-1.medium.com/max/800/1*RipeuoPFso0ycMsfuX5TlQ.png"><figcaption class="imageCaption">Resulting empty DataFrame, with DateTime index</figcaption></figure><p name="745e" id="745e" class="graf graf--p graf-after--figure">Okay. So we have our DataFrame, now we need to populate it. The idea is that each row will represent the anomaly for that month — we could have therefore used a discrete index of ‘month’ (or even ‘year’ with the average of the months’ anomalies). I chose to do it this way because this a tutorial on time series analyses and I thought it’d be a more useful exercise.</p><p name="d2c2" id="d2c2" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Basic manipulation and dealing with missing values</em></strong></p><p name="4efb" id="4efb" class="graf graf--p graf-after--p">In order to populate our DataFrame, we will basically be stepping through a slice of the raw data that we are interested in (i.e. the year and month columns), and assigning the corresponding anomaly values to our new DataFrame.</p><p name="a3cc" id="a3cc" class="graf graf--p graf-after--p">Lets first select only the data that we want, to do this we make use of Pandas’ <a href="https://pandas.pydata.org/pandas-docs/stable/indexing.html" data-href="https://pandas.pydata.org/pandas-docs/stable/indexing.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">selecting functionality</a>. We only want the year column, as well as the month columns — and will leave out the season columns.</p><pre name="6a58" id="6a58" class="graf graf--pre graf-after--p">raw_t = raw_t.iloc[:,:13]<br>raw_t.head()</pre><figure name="4388" id="4388" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*SiAdgmb62CGb2VAWIlmrkQ.png" data-width="1008" data-height="352" src="https://cdn-images-1.medium.com/max/800/1*SiAdgmb62CGb2VAWIlmrkQ.png"><figcaption class="imageCaption">Slice of raw temperature data</figcaption></figure><p name="f10b" id="f10b" class="graf graf--p graf-after--figure">We will now make use of Pandas’ <a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html" data-href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">apply</a> function to ‘step through’ the rows of our raw data (axis=1 for rows, 0 for columns). We will also make use of a couple of additional libraries, namely:</p><ul class="postList"><li name="4ee4" id="4ee4" class="graf graf--li graf-after--p"><a href="https://docs.python.org/3.7/library/datetime.html" data-href="https://docs.python.org/3.7/library/datetime.html" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">datetime</a></li><li name="55f6" id="55f6" class="graf graf--li graf-after--li"><a href="https://docs.python.org/3.7/library/calendar.html" data-href="https://docs.python.org/3.7/library/calendar.html" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">calendar</a></li></ul><p name="a739" id="a739" class="graf graf--p graf-after--li">Python’s datetime ‘library’ will be useful as it can help us parse dates and times of various formats (see <a href="https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior" data-href="https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a>). The calendar library is used to get the last day of each month.</p><figure name="a2e9" id="a2e9" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/peter-stuart-turner/e05684a7a4c8f3ce17a2826b410f1d17.js.js"></script><figcaption class="imageCaption">Using NASA data to populate our DataFrame using DateTime index</figcaption></figure><figure name="7345" id="7345" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*AtC4vJ_matzUXLdLo4PhbQ.png" data-width="432" data-height="394" src="https://cdn-images-1.medium.com/max/800/1*AtC4vJ_matzUXLdLo4PhbQ.png"><figcaption class="imageCaption">Now populated DataFrame</figcaption></figure><p name="2f6d" id="2f6d" class="graf graf--p graf-after--figure">You may have noticed that the anomaly values seem to be a bit messy, they are a mixture of strings and floats — with a few unusable ‘***’ values mixed in (2019). Let&#39;s clean them up.</p><figure name="be02" id="be02" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/peter-stuart-turner/379a7969c1fb494fb1d57defcfbb92d8.js.js"></script><figcaption class="imageCaption">Cleaning up anomaly values, and dealing with NaNs using Panda’s ‘Foward Fill’</figcaption></figure><figure name="3ab6" id="3ab6" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*OwfiGaf_T7owlcvriivFXA.png" data-width="438" data-height="402" src="https://cdn-images-1.medium.com/max/800/1*OwfiGaf_T7owlcvriivFXA.png"><figcaption class="imageCaption">Final temperature DataFrame, after wrangling</figcaption></figure><p name="2761" id="2761" class="graf graf--p graf-after--figure">Great! We have successfully wrangled our NASA temperature anomaly data into a nice, usable form. We will cover the plotting of our data in more detail later but in the meantime, you can render a simple plot within your notebook using Matplotlib:</p><figure name="ec7a" id="ec7a" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/peter-stuart-turner/750ed90374c00181372ece86ac86a806.js.js"></script><figcaption class="imageCaption">Code to plot our temperature anomaly data using Matplotlib</figcaption></figure><figure name="d0f2" id="d0f2" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*twRRnqEWa-ch0afdphYPTw.png" data-width="621" data-height="483" src="https://cdn-images-1.medium.com/max/800/1*twRRnqEWa-ch0afdphYPTw.png"><figcaption class="imageCaption">Resulting plot of temperature anomaly data using Matplotlib</figcaption></figure><p name="3132" id="3132" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Resampling to a different frequency:</em></strong></p><p name="a675" id="a675" class="graf graf--p graf-after--p">Now this is all good and well, but the above plot looks a bit messy — it seems that over such a long time period the data is too granular to visualize nicely. Pandas offers a very convenient function known as ‘<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.resample.html" data-href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.resample.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">resample</a>’, which can change our frequency from months to years (this will also be helpful when comparing it with the CO₂ data later on).</p><p name="d198" id="d198" class="graf graf--p graf-after--p">Let’s downsample our temperature data into years, the string ‘A’ represents ‘calendar year-end’. For all of the frequency strings, see <a href="http://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html" data-href="http://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a>.</p><pre name="1794" id="1794" class="graf graf--pre graf-after--p">t.resample(&#39;A&#39;).mean().head()</pre><figure name="7b11" id="7b11" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*UVOkkP5yy4DEkMdChwb2pA.png" data-width="432" data-height="392" src="https://cdn-images-1.medium.com/max/800/1*UVOkkP5yy4DEkMdChwb2pA.png"><figcaption class="imageCaption">Resulting DataFrame after resampling to yearly frequency (end-of-year)</figcaption></figure><p name="4a75" id="4a75" class="graf graf--p graf-after--figure">The resulting plot is much cleaner:</p><figure name="a84c" id="a84c" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/peter-stuart-turner/7183fd991a0b58b8a6d7c413a50725a1.js.js"></script><figcaption class="imageCaption">Code to plot resampled temperature anomaly data</figcaption></figure><figure name="7019" id="7019" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*Vjv8GwPTFpUrcZvTLKXYHw.png" data-width="621" data-height="483" src="https://cdn-images-1.medium.com/max/800/1*Vjv8GwPTFpUrcZvTLKXYHw.png"><figcaption class="imageCaption">Resulting plot of resampled temperature anomaly data</figcaption></figure><p name="89e8" id="89e8" class="graf graf--p graf-after--figure graf--trailing">Alright, I think we have wrangled our temperature data to a state in which we will be able to use it productively — let&#39;s move on to the CO₂ emissions data.</p></div></div></section><section name="0886" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h4 name="6a6f" id="6a6f" class="graf graf--h4 graf--leading">Wrangling of CO₂ emissions data</h4><p name="ad03" id="ad03" class="graf graf--p graf-after--h4">This section will tackle the wrangling of our Carbon Dioxide emissions data. We will use some of the same techniques used above, as well as looking at some new ones:</p><ul class="postList"><li name="e06e" id="e06e" class="graf graf--li graf-after--p">Slicing and Searching</li><li name="440c" id="440c" class="graf graf--li graf-after--li">Useful functions</li></ul><p name="26ab" id="26ab" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Familiar techniques</em></strong></p><p name="eb0c" id="eb0c" class="graf graf--p graf-after--p">From our DataFrame, we will use only the row representing the CO₂ emissions for the entire world. Like before, we will create a new DataFrame that uses a DateTime index — and then use the raw data to populate it.</p><figure name="218f" id="218f" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/peter-stuart-turner/3ad46612a4a6b7aeb3f4a872ca5b0dc7.js.js"></script><figcaption class="imageCaption">Creating a DataFrame — and populating it — with world emissions data</figcaption></figure><figure name="add5" id="add5" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*_uiX1xJ52HTjbT2nW4dNEw.png" data-width="576" data-height="392" src="https://cdn-images-1.medium.com/max/800/1*_uiX1xJ52HTjbT2nW4dNEw.png"><figcaption class="imageCaption">Resulting emissions DataFrame</figcaption></figure><p name="522c" id="522c" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Slicing and Searching</em></strong></p><p name="fa4c" id="fa4c" class="graf graf--p graf-after--p">DateTime indexes make for convenient slicing of data, let’s select all of our data after the year 2011:</p><pre name="4db2" id="4db2" class="graf graf--pre graf-after--p">e[e.index.year&gt;2011]</pre><figure name="2229" id="2229" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*OfMJGUfzmjcMXxUfYjvXsA.png" data-width="564" data-height="482" src="https://cdn-images-1.medium.com/max/800/1*OfMJGUfzmjcMXxUfYjvXsA.png"><figcaption class="imageCaption">Slice of emissions data after the year 2011 (notice the missing data)</figcaption></figure><p name="8694" id="8694" class="graf graf--p graf-after--figure">Hmm. There seems to be a few NaN’s towards the end of our data — lets use Panda’s <em class="markup--em markup--p-em">fillna </em>method to deal with this.</p><pre name="a048" id="a048" class="graf graf--pre graf-after--p">e.fillna(method=&#39;ffill&#39;, inplace=True)<br>e[e.index.year&gt;2011]</pre><figure name="2301" id="2301" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*_n3e56eCJY8mbDu86DWQnw.png" data-width="592" data-height="522" src="https://cdn-images-1.medium.com/max/800/1*_n3e56eCJY8mbDu86DWQnw.png"><figcaption class="imageCaption">Slice of emissions data after the year 2011 (no missing data)</figcaption></figure><p name="4c35" id="4c35" class="graf graf--p graf-after--figure">Much better! We can also make use of the DateTime index to search for values within a specific range:</p><pre name="f12f" id="f12f" class="graf graf--pre graf-after--p">e[&#39;1984-01-04&#39;:&#39;1990-01-06&#39;]</pre><figure name="19a4" id="19a4" class="graf graf--figure graf-after--pre"><img class="graf-image" data-image-id="1*uJgm3l5A5pDGBiqWd3dKHA.png" data-width="590" data-height="450" src="https://cdn-images-1.medium.com/max/800/1*uJgm3l5A5pDGBiqWd3dKHA.png"><figcaption class="imageCaption">Resulting slice of emissions data within the specified range</figcaption></figure><p name="c25a" id="c25a" class="graf graf--p graf-after--figure">This functionality starts to become very useful with more granular time-based data — in our case we have years, and so a range index would probably have been sufficient.</p><p name="f3f8" id="f3f8" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Useful functions</em></strong></p><p name="10b1" id="10b1" class="graf graf--p graf-after--p">Pandas provides a whole range of other functions that can be very useful when dealing with time series data — we cannot cover them all in this tutorial, but some are listed below:</p><ul class="postList"><li name="a2f8" id="a2f8" class="graf graf--li graf-after--p">DataFrame.<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.rolling.html" data-href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.rolling.html" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">rolling</a> → provides rolling window calculations</li><li name="b6e4" id="b6e4" class="graf graf--li graf-after--li">Pandas.to_datetime → a replacement for datetime.datetime’s <em class="markup--em markup--li-em">strptime </em>function, it is more useful as it can infer the format</li><li name="bca2" id="bca2" class="graf graf--li graf-after--li">TimSeries.<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.shift.html#pandas.Series.shift" data-href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.shift.html#pandas.Series.shift" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">shift</a> &amp; TimSeries.<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.tshift.html#pandas.Series.tshift" data-href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.tshift.html#pandas.Series.tshift" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">tshift</a> → allows for shifting or lagging of the values of a time series backward and forwards in time</li></ul><p name="037d" id="037d" class="graf graf--p graf-after--li">For more information and functionality, see this <a href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#time-series-related-instance-methods" data-href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#time-series-related-instance-methods" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">great Pandas page on time series</a>.</p><h3 name="b7e5" id="b7e5" class="graf graf--h3 graf-after--p">Visualizing</h3><p name="f715" id="f715" class="graf graf--p graf-after--h3">Now that we have our datasets nicely wrangled, let’s look at how to plot them. We will be using two plotting libraries, namely:</p><ul class="postList"><li name="f98a" id="f98a" class="graf graf--li graf-after--p">Matplotlib</li><li name="a380" id="a380" class="graf graf--li graf-after--li">Plotly</li></ul><h4 name="451a" id="451a" class="graf graf--h4 graf-after--li">Plotting with Matplotlib</h4><p name="49f7" id="49f7" class="graf graf--p graf-after--h4"><a href="https://matplotlib.org/" data-href="https://matplotlib.org/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Matplotlib</a> is a very popular 2D plotting library for Python, and can easily be downloaded using pip.</p><p name="8c98" id="8c98" class="graf graf--p graf-after--p">Let&#39;s plot our temperature data again using Matplotlib, this time we will do it more fancily — adding axis labels and titles, etc.:</p><figure name="82a1" id="82a1" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/peter-stuart-turner/65f6145b6af2deb83fd29316897ee804.js.js"></script><figcaption class="imageCaption">Code to plot temperature anomalies using Matplotlib</figcaption></figure><figure name="9cff" id="9cff" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*RNbuJ1WWbGdVgjvBmvJY3g.png" data-width="621" data-height="496" src="https://cdn-images-1.medium.com/max/800/1*RNbuJ1WWbGdVgjvBmvJY3g.png"><figcaption class="imageCaption">Resulting temperature plot using Matplotlib</figcaption></figure><p name="636d" id="636d" class="graf graf--p graf-after--figure">And our CO₂ emissions data:</p><figure name="df15" id="df15" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/peter-stuart-turner/bde2c627e1e2674219b2726a68e511cc.js.js"></script><figcaption class="imageCaption">Code to plot emissions using Matplotlib</figcaption></figure><figure name="5271" id="5271" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*q4_5ioxbZZqasRliTTmqYw.png" data-width="619" data-height="496" src="https://cdn-images-1.medium.com/max/800/1*q4_5ioxbZZqasRliTTmqYw.png"><figcaption class="imageCaption">Resulting emissions plot using Matplotlib</figcaption></figure><h4 name="22f8" id="22f8" class="graf graf--h4 graf-after--figure">Plotting with Plotly</h4><p name="f4b1" id="f4b1" class="graf graf--p graf-after--h4">Plotly is a great library for generating plots that are both interactive and suitable for the web. The <a href="https://plot.ly/python/" data-href="https://plot.ly/python/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Plotly Python package</a> is an open-source library built on <a href="https://plot.ly/javascript/" data-href="https://plot.ly/javascript/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">plotly.js </a>— which is in turn built on <a href="https://d3js.org/" data-href="https://d3js.org/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">d3.js</a>. In this tutorial, we will be using a wrapper called <a href="https://github.com/santosjorge/cufflinks" data-href="https://github.com/santosjorge/cufflinks" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">cufflinks</a> — this makes it easy to use Plotly with Pandas DataFrames.</p><figure name="927b" id="927b" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/peter-stuart-turner/8b39a9eb18dc7dc0f1a1327566399197.js.js"></script><figcaption class="imageCaption">Importing Plotly and Cufflinks correctly for offline mode</figcaption></figure><p name="e13d" id="e13d" class="graf graf--p graf-after--figure">Now that we have the library correctly imported, let’s plot both datasets again, this time using Plotly and Cufflinks:</p><figure name="684c" id="684c" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/peter-stuart-turner/cd504def2dc6f00a30e2b5be815b2487.js.js"></script><figcaption class="imageCaption">Plotting temperature data using Plotly</figcaption></figure><figure name="9c62" id="9c62" class="graf graf--figure graf--iframe graf-after--figure"><script src="https://gist.github.com/peter-stuart-turner/4379520a5b4de8306217bf58f3d7fa4e.js.js"></script><figcaption class="imageCaption">Plotting emissions data using Plotly</figcaption></figure><p name="41cc" id="41cc" class="graf graf--p graf-after--figure">The resulting plots look much nicer — and are interactive:</p><figure name="3241" id="3241" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*C_pXX7l_5QcWIHnLFgvjMw.gif" data-width="1008" data-height="528" src="https://cdn-images-1.medium.com/max/800/1*C_pXX7l_5QcWIHnLFgvjMw.gif"><figcaption class="imageCaption">Resulting temperature plot using Plotly</figcaption></figure><figure name="3582" id="3582" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*i6d_NB2frx8XGSPcjCKcWQ.gif" data-width="996" data-height="528" src="https://cdn-images-1.medium.com/max/800/1*i6d_NB2frx8XGSPcjCKcWQ.gif"><figcaption class="imageCaption">Resulting emissions plot using Plotly</figcaption></figure><h3 name="22be" id="22be" class="graf graf--h3 graf-after--figure">Time Series Correlation</h3><p name="193a" id="193a" class="graf graf--p graf-after--h3">Although it seems relatively obvious that both series are trending upwards, what we’d actually like to do here is determine whether the temperature change is as a result of the CO₂ emissions.</p><h4 name="86bb" id="86bb" class="graf graf--h4 graf-after--p">Granger Causality</h4><p name="c13f" id="c13f" class="graf graf--p graf-after--h4">Now, proving causation is actually very difficult — and just because two things are correlated, does not mean that one causes the other (as any statistician will earnestly tell you!). What we will do instead is determine how helpful the CO₂ emissions data is in forecasting the temperature data; to do this we will use the <a href="http://www.scholarpedia.org/article/Granger_causality" data-href="http://www.scholarpedia.org/article/Granger_causality" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Granger Causality</a> test.</p><p name="3b01" id="3b01" class="graf graf--p graf-after--p">Do not be fooled by the name, Granger Causality does not test for true causality. It would actually be more apt to call it Granger <em class="markup--em markup--p-em">Predictability</em>, or something along those lines.</p><p name="a72c" id="a72c" class="graf graf--p graf-after--p">Anyway — what this test does is determine whether one time series will be useful in forecasting another.</p><h4 name="3a8d" id="3a8d" class="graf graf--h4 graf-after--p">Dynamic Time Warping</h4><p name="450f" id="450f" class="graf graf--p graf-after--h4">We, humans, have developed a number of clever techniques to help us measure the similarity between time series — Dynamic Time Warping (DTW) is one such technique. What DTW is particularly good at, as measuring similarities between series that ‘differ in speed’.</p><p name="23b7" id="23b7" class="graf graf--p graf-after--p">For example, and to quote Wikipedia:</p><blockquote name="b9f3" id="b9f3" class="graf graf--blockquote graf--startsWithDoubleQuote graf-after--p">“Similarities in walking could be detected using DTW, even if one person was walking faster than the other, or if there were accelerations and decelerations during the course of an observation.”</blockquote><p name="03e8" id="03e8" class="graf graf--p graf-after--blockquote">As this blog post was running awfully long, <strong class="markup--strong markup--p-strong">I have decided to separate out both the Granger Causality, as well as the Dynamic Time Warping stuff, into a separate post</strong>.</p><h3 name="57f2" id="57f2" class="graf graf--h3 graf-after--p">Modeling and Forecasting</h3><p name="7a99" id="7a99" class="graf graf--p graf-after--h3">Okay so we can pull, wrangle and visualize our data — and we can do Granger Causality tests to determine whether one time series can be used to predict another; but what about forecasting?</p><p name="0f3c" id="0f3c" class="graf graf--p graf-after--p">Forecasting is fun because it allows us to take a stab at predicting the future.</p><p name="b66f" id="b66f" class="graf graf--p graf-after--p">In this section, we will look at forecasting using a library, namely Facebook’s Prophet library.</p><p name="2cb6" id="2cb6" class="graf graf--p graf-after--p">We will also briefly look at ARIMA models — though so as to keep this blog post from getting unmanageably long, we will not go through ARIMA in too much detail (at least not in this post).</p><h4 name="da73" id="da73" class="graf graf--h4 graf-after--p">Forecasting using Facebook’s Prophet</h4><p name="220e" id="220e" class="graf graf--p graf-after--h4">Our blue overlords — Facebook — have released an extremely powerful and user-friendly library named ‘Prophet’. Prophet makes is possible for those with little-to-no experience to predict time series, whilst providing intuitive parameters that are simple to tune. The library works in a similar way to the models in <code class="markup--code markup--p-code">sklearn</code> — an instance of the <code class="markup--code markup--p-code">Prophet</code>is instantiated, and then the<code class="markup--code markup--p-code">fit</code> and <code class="markup--code markup--p-code">predict</code> methods are called. This may come as a breath-of-fresh-air to you machine learning enthusiasts out there, it certainly did to me.</p><p name="6d51" id="6d51" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Creating, fitting and plotting a model for Temperature</em></strong></p><p name="bc66" id="bc66" class="graf graf--p graf-after--p">We will first import Prophet, and then create a separate DataFrame into which we will copy the data across in the correct format — Prophet takes a DataFrame with two columns, one for the date and one for the values. The date column must be called ‘ds’ whilst the value column must be called ‘y’. You could do this by modifying your original DataFrame, but I opted to just create a new one:</p><figure name="b31d" id="b31d" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/peter-stuart-turner/c53ffb4f802fc0a21489c25e92aa6495.js.js"></script><figcaption class="imageCaption">Python code to train a temperature anomaly model using Prophet</figcaption></figure><figure name="9fcc" id="9fcc" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*QEWk9LRupz8YBYkgGe4yMg.png" data-width="712" data-height="424" src="https://cdn-images-1.medium.com/max/800/1*QEWk9LRupz8YBYkgGe4yMg.png"><figcaption class="imageCaption">Resulting forecast for temperature anomalies</figcaption></figure><p name="a269" id="a269" class="graf graf--p graf-after--figure">And there we have it, a prediction for global temperature anomalies over the next 100 years! Notice the light blue region, which widens as we move further into the future? That is the forecast’s uncertainty; which grows as we proceed further forward in time.</p><p name="f360" id="f360" class="graf graf--p graf-after--p">Remember that this forecast only takes into account past anomaly data and nothing else. In reality, this could prove problematic as the heat retained may actually increase exponentially with increased CO₂ in the atmosphere. The picture below shows NASA’s current global surface temperature forecast for different levels of emissions into the future (hey, we didn’t do too badly!).</p><figure name="be63" id="be63" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*0qPaOnoRqJG-wxZrJBO3zw.png" data-width="720" data-height="335" src="https://cdn-images-1.medium.com/max/800/1*0qPaOnoRqJG-wxZrJBO3zw.png"><figcaption class="imageCaption">NASA’s forecast</figcaption></figure><p name="cbd3" id="cbd3" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Decomposition</em></strong></p><p name="93fe" id="93fe" class="graf graf--p graf-after--p">As was stated at the beginning of this article, it can be useful to think of a time series as being made up of several components; and luckily for us, Prophet can help us break up our model into these components — so that we can see them visually.</p><p name="c3d0" id="c3d0" class="graf graf--p graf-after--p">We have already instantiated our model above, to split the model up into its components — run the following code:</p><pre name="1b9e" id="1b9e" class="graf graf--pre graf-after--p"># Plot the forecast components<br>m.plot_components(forecast);</pre><p name="4219" id="4219" class="graf graf--p graf-after--pre">By default, you’ll see the trend and yearly seasonality of the time series. If you include holidays, you’ll see those here, too. (With more granular data — the weekly seasonality will be shown too).</p><figure name="b5a0" id="b5a0" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*y0KX1JIIzChFOprarvuxrQ.png" data-width="640" data-height="424" src="https://cdn-images-1.medium.com/max/800/1*y0KX1JIIzChFOprarvuxrQ.png"></figure><p name="8b3d" id="8b3d" class="graf graf--p graf-after--figure">What can you tell by looking at the components? Leave your comments below.</p><h4 name="d47a" id="d47a" class="graf graf--h4 graf-after--p">Forecasting using ARIMA</h4><p name="e0e0" id="e0e0" class="graf graf--p graf-after--h4">Autoregressive Integrated Moving Average — or ARIMA — is a forecasting technique which is able to project future values of a series.</p><p name="4a19" id="4a19" class="graf graf--p graf-after--p">ARIMA is part of a broader class of time series models, all of which are very useful in that they <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">provide a means through which we can use linear regression type models on non-stationary data.</em></strong></p><p name="2af7" id="2af7" class="graf graf--p graf-after--p">Stationarity basically means that your data is not evolving with time (see explanation in the next section). Linear models require stationarity; they are good at dealing with and predicting stationary data.</p><p name="4f9a" id="4f9a" class="graf graf--p graf-after--p">So the basic intuition is that we’d like to achieve a stationary time series that we can do linear regression on, and ARIMA is just linear regression with some terms which ‘force’ your time series to be stationary.</p><p name="5687" id="5687" class="graf graf--p graf-after--p">As this blog post is getting rather long — I have decided to leave Autoregressive Integrated Moving Average Modeling for another day, and another post. For now, see <a href="https://machinelearningmastery.com/time-series-forecasting-methods-in-python-cheat-sheet/" data-href="https://machinelearningmastery.com/time-series-forecasting-methods-in-python-cheat-sheet/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">this post</a> for a great introduction to the various forecasting methods (including ARIMA).</p><h3 name="a288" id="a288" class="graf graf--h3 graf-after--p">General Tips, Terms, and Common Pitfalls</h3><h4 name="b8a1" id="b8a1" class="graf graf--h4 graf-after--h3">Terms</h4><p name="8d00" id="8d00" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Autocorrelation</em></strong></p><p name="c861" id="c861" class="graf graf--p graf-after--p">Autocorrelation is an important concept to understand when doing time series analyses; the term refers to (and is a mathematical representation of) the degree of similarity between a given time series, and a lagged version of itself over successive time intervals. Think of autocorrelation as the correlation of a time series with itself — it is thus sometimes referred to as lagged correlation (or serial correlation). If you are interested in doing ARIMA modeling (see below) — an understanding of autocorrelation is doubly important.</p><p name="1f05" id="1f05" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Spurious Correlation</em></strong></p><p name="1bf8" id="1bf8" class="graf graf--p graf-after--p">Spurious correlations are actually not-altogether uncommon phenomena in statistics; a spurious correlation is a mathematical relationship in which two or more events or variables are associated but not causally related. This can be due to either coincidence or the presence of a third, unseen factor (sometimes called a “common response variable”, “confounding factor”, or “lurking variable”).</p><p name="ed53" id="ed53" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Stationarity</em></strong></p><p name="9314" id="9314" class="graf graf--p graf-after--p">A stationary time series is one in which several statistical properties — namely the mean, variance, and covariance — <strong class="markup--strong markup--p-strong">do not vary with time</strong>. This means that, although the values can change with time, <em class="markup--em markup--p-em">the way the series itself changes with time does not change over time.</em></p><figure name="8fab" id="8fab" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*MzQjO3TStvnXtIHAUEPGxQ.png" data-width="1228" data-height="930" src="https://cdn-images-1.medium.com/max/800/1*MzQjO3TStvnXtIHAUEPGxQ.png"><figcaption class="imageCaption">Stationary vs. Non-Stationary Time Series</figcaption></figure><p name="a93e" id="a93e" class="graf graf--p graf-after--figure">For more on this, check <a href="https://towardsdatascience.com/stationarity-in-time-series-analysis-90c94f27322" data-href="https://towardsdatascience.com/stationarity-in-time-series-analysis-90c94f27322" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a> and <a href="https://www.analyticsvidhya.com/blog/2018/09/non-stationary-time-series-python/" data-href="https://www.analyticsvidhya.com/blog/2018/09/non-stationary-time-series-python/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">here</a>. We will not dive too deep into stationarity — but we will do go over a how we can test for stationarity, and how we can make our two series stationary (for the purpose of the Granger Causality test) in <strong class="markup--strong markup--p-strong">this post.</strong></p><h4 name="1891" id="1891" class="graf graf--h4 graf-after--p">Tips</h4><p name="5803" id="5803" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Correlation is not Causation</em></strong></p><p name="fbe1" id="fbe1" class="graf graf--p graf-after--p">What has come to be a basic mantra in the world of statistics is that correlation does not equal causation. This means that just because two things appear to be related to one another does not mean that one causes the other. This is a worthwhile lesson to learn early on.</p><figure name="c422" id="c422" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Uny-ym1ashJxGKzn1Gmwhw.png" data-width="459" data-height="185" src="https://cdn-images-1.medium.com/max/800/1*Uny-ym1ashJxGKzn1Gmwhw.png"><figcaption class="imageCaption">Correlation does not have to equal causation (<a href="https://www.explainxkcd.com/wiki/index.php/552:_Correlation" data-href="https://www.explainxkcd.com/wiki/index.php/552:_Correlation" class="markup--anchor markup--figure-anchor" rel="noopener" target="_blank">original</a>)</figcaption></figure><p name="c481" id="c481" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Beware of trend</em></strong></p><p name="53e3" id="53e3" class="graf graf--p graf-after--p">Trends occur in many time series, and before embarking on an exploration of the relationship between two different time series, you should first attempt to measure and control for this trend. In doing so, you will lessen the chance of encountering spurious correlations. But even de-trending a time series cannot protect you from all spurious correlations — patterns such as seasonality, periodicity and autocorrelation can too.</p><p name="b4c2" id="b4c2" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">Be aware of how you deal with a trend</em></strong></p><p name="163a" id="163a" class="graf graf--p graf-after--p graf--trailing">It is possible to de-trend naively. Attempting to achieve stationarity using (for example) a first differences approach may spoil your data if you are looking for lagged effects.</p></div></div></section><section name="4950" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="ce7f" id="ce7f" class="graf graf--figure graf--leading"><img class="graf-image" data-image-id="1*Hz9mOzqtWYyau8MGqcgseQ.jpeg" data-width="960" data-height="720" src="https://cdn-images-1.medium.com/max/800/1*Hz9mOzqtWYyau8MGqcgseQ.jpeg"><figcaption class="imageCaption">Thanks for reading!</figcaption></figure><p name="3df8" id="3df8" class="graf graf--p graf-after--figure">I hope that this post has been somewhat enlightening to those that are getting started out with time series analyses — I really enjoyed writing it, and learned loads doing so.</p><p name="852d" id="852d" class="graf graf--p graf-after--p">All of the source code can be found on <a href="https://github.com/peter-stuart-turner/time-series-analyses-and-climate-change" data-href="https://github.com/peter-stuart-turner/time-series-analyses-and-climate-change" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Github</a>. Please post feedback or questions below.</p><h3 name="a465" id="a465" class="graf graf--h3 graf-after--p">References</h3><ul class="postList"><li name="748e" id="748e" class="graf graf--li graf-after--h3"><a href="https://climate.nasa.gov/evidence/" data-href="https://climate.nasa.gov/evidence/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://climate.nasa.gov/evidence/</a></li><li name="d5f3" id="d5f3" class="graf graf--li graf-after--li"><a href="https://www.svds.com/tbt-avoiding-common-mistakes-time-series-analysis/" data-href="https://www.svds.com/tbt-avoiding-common-mistakes-time-series-analysis/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://www.svds.com/tbt-avoiding-common-mistakes-time-series-analysis/</a></li><li name="173d" id="173d" class="graf graf--li graf-after--li"><a href="https://medium.com/@shachiakyaagba_41915/dynamic-time-warping-with-time-series-1f5c05fb8950" data-href="https://medium.com/@shachiakyaagba_41915/dynamic-time-warping-with-time-series-1f5c05fb8950" class="markup--anchor markup--li-anchor" target="_blank">https://medium.com/@shachiakyaagba_41915/dynamic-time-warping-with-time-series-1f5c05fb8950</a></li><li name="95b0" id="95b0" class="graf graf--li graf-after--li"><a href="https://www.machinelearningplus.com/time-series/time-series-analysis-python/" data-href="https://www.machinelearningplus.com/time-series/time-series-analysis-python/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://www.machinelearningplus.com/time-series/time-series-analysis-python/</a></li><li name="79f0" id="79f0" class="graf graf--li graf-after--li"><a href="https://towardsdatascience.com/basic-time-series-manipulation-with-pandas-4432afee64ea" data-href="https://towardsdatascience.com/basic-time-series-manipulation-with-pandas-4432afee64ea" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://towardsdatascience.com/basic-time-series-manipulation-with-pandas-4432afee64ea</a></li><li name="5238" id="5238" class="graf graf--li graf-after--li"><a href="https://machinelearningmastery.com/time-series-forecasting-methods-in-python-cheat-sheet/" data-href="https://machinelearningmastery.com/time-series-forecasting-methods-in-python-cheat-sheet/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://machinelearningmastery.com/time-series-forecasting-methods-in-python-cheat-sheet/</a></li><li name="1d66" id="1d66" class="graf graf--li graf-after--li"><a href="https://towardsdatascience.com/end-to-end-time-series-analysis-and-modelling-8c34f09a3014" data-href="https://towardsdatascience.com/end-to-end-time-series-analysis-and-modelling-8c34f09a3014" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://towardsdatascience.com/end-to-end-time-series-analysis-and-modelling-8c34f09a3014</a></li><li name="2b9c" id="2b9c" class="graf graf--li graf-after--li"><a href="https://machinelearningmastery.com/time-series-data-stationary-python/" data-href="https://machinelearningmastery.com/time-series-data-stationary-python/" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://machinelearningmastery.com/time-series-data-stationary-python/</a></li><li name="5247" id="5247" class="graf graf--li graf-after--li graf--trailing"><a href="https://www.quora.com/What-is-the-intuitive-explanation-of-ARIMA" data-href="https://www.quora.com/What-is-the-intuitive-explanation-of-ARIMA" class="markup--anchor markup--li-anchor" rel="noopener" target="_blank">https://www.quora.com/What-is-the-intuitive-explanation-of-ARIMA</a></li></ul></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@peter-turner" class="p-author h-card">Peter Turner</a> on <a href="https://medium.com/p/7bb4371021e"><time class="dt-published" datetime="2019-06-04T07:49:05.239Z">June 4, 2019</time></a>.</p><p><a href="https://medium.com/@peter-turner/time-series-analysis-and-climate-change-7bb4371021e" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on July 18, 2021.</p></footer></article></body></html>